<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>نظام اختيار الميزات باستخدام الخوارزميات الجينية</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <style>
        .scrollable-table {
            max-height: 500px;
            overflow: auto;
        }
        .scrollable-table table {
            min-width: 800px;
        }
        .scrollable-horizontal {
            overflow-x: auto;
            white-space: nowrap;
        }
        .feature-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e9ecef;
            border-radius: 5px;
            padding: 10px;
        }
        .method-result-card {
            max-height: 300px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            margin-bottom: 15px;
            padding: 15px;
        }
        .table-responsive-custom {
            max-height: 400px;
            overflow: auto;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="#">
                <i class="fas fa-dna me-2"></i>
                نظام اختيار الميزات المتقدم
            </a>
        </div>
    </nav>

    <div class="container mt-4">
        <section id="data-section" class="mb-5">
            <div class="section-header">
                <h2><i class="fas fa-database me-2"></i>إدارة البيانات</h2>
                <p class="section-description">قم بتحميل أو توليد البيانات لبدء عملية اختيار الميزات</p>
            </div>
            
            <div class="row">
                <div class="col-md-4">
                    <div class="card data-card">
                        <div class="card-header bg-info text-white">
                            <h5><i class="fas fa-random me-2"></i>توليد بيانات عشوائية</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">عدد العينات</label>
                                <input type="number" class="form-control" id="nSamples" value="200" min="50" max="1000">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">عدد الميزات</label>
                                <input type="number" class="form-control" id="nFeatures" value="20" min="5" max="100">
                            </div>
                            <div class="mb-3">
                                <label class="form-label">الميزات المعلوماتية</label>
                                <input type="number" class="form-control" id="nInformative" value="5" min="1" max="20">
                            </div>
                            <button class="btn btn-info w-100" id="generateData">
                                <i class="fas fa-random me-2"></i>توليد بيانات
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card data-card">
                        <div class="card-header bg-success text-white">
                            <h5><i class="fas fa-upload me-2"></i>رفع ملف بيانات</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">اختر ملف البيانات</label>
                                <input class="form-control" type="file" id="fileUpload" accept=".csv,.xlsx,.xls">
                            </div>
                            <p class="text-muted small">يدعم الملفات: CSV, Excel</p>
                            <button class="btn btn-success w-100" id="uploadData">
                                <i class="fas fa-upload me-2"></i>رفع البيانات
                            </button>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card data-card">
                        <div class="card-header bg-warning text-dark">
                            <h5><i class="fas fa-download me-2"></i>جلب من رابط</h5>
                        </div>
                        <div class="card-body">
                            <div class="mb-3">
                                <label class="form-label">رابط البيانات</label>
                                <input type="url" class="form-control" id="dataUrl" placeholder="https://example.com/data.csv">
                            </div>
                            <p class="text-muted small">يدعم روابط CSV و Excel</p>
                            <button class="btn btn-warning w-100" id="fetchData">
                                <i class="fas fa-download me-2"></i>جلب البيانات
                            </button>
                        </div>
                    </div>
                </div>
            </div>

           <div id="dataPreview" class="mt-4" style="display: none;">
    <div class="card">
        <div class="card-header bg-secondary text-white">
            <h5><i class="fas fa-table me-2"></i>معاينة البيانات</h5>
        </div>
        <div class="card-body">
            <div class="scrollable-table">
                <div class="scrollable-horizontal">
                    <table class="table table-striped table-bordered" id="previewTable">
                        <thead class="table-light">
                            <tr id="previewHeader"></tr>
                        </thead>
                        <tbody id="previewBody"></tbody>
                    </table>
                </div>
            </div>
            <div class="mt-2 text-muted" id="dataInfo"></div>
        </div>
    </div>
</div>
        </section>

        <section id="ga-section" class="mb-5">
            <div class="section-header">
                <h2><i class="fas fa-brain me-2"></i>الخوارزمية الجينية</h2>
                <p class="section-description">استخدم الخوارزمية الجينية المتطورة لإيجاد أفضل مجموعة ميزات</p>
            </div>

            <div class="row">
                <div class="col-md-8">
                    <div class="card method-box ga-box">
                        <div class="card-header bg-primary text-white">
                            <h5><i class="fas fa-dna me-2"></i>الخوارزمية الجينية</h5>
                        </div>
                        <div class="card-body">
                            <div class="method-description">
                                <p>الخوارزمية الجينية تحاكي عملية التطور الطبيعي لإيجاد أفضل مجموعة من الميزات باستخدام التهجين والطفرة والاختيار.</p>
                            </div>
                            <div class="row g-3 mt-3">
                                <div class="col-md-6">
                                    <label class="form-label">حجم المجتمع</label>
                                    <input type="number" class="form-control" id="popSize" value="15" min="10" max="50">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">عدد الأجيال</label>
                                    <input type="number" class="form-control" id="generations" value="10" min="5" max="30">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">معدل التهجين</label>
                                    <input type="number" class="form-control" id="crossoverRate" value="0.8" min="0.1" max="1" step="0.1">
                                </div>
                                <div class="col-md-6">
                                    <label class="form-label">معدل الطفرة</label>
                                    <input type="number" class="form-control" id="mutationRate" value="0.02" min="0.01" max="0.2" step="0.01">
                                </div>
                            </div>
                            <div class="mt-4 text-center">
                                <button class="btn btn-primary btn-lg" id="runGA">
                                    <i class="fas fa-play me-2"></i>تشغيل الخوارزمية الجينية
                                </button>
                            </div>
                            <div class="mt-3 text-center">
                                <small class="text-muted">
                                    <i class="fas fa-info-circle me-1"></i>
                                    حالة الذاكرة: 
                                    <span id="gaCacheStatus" class="badge bg-secondary">غير متوفرة</span>
                                </small>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-md-4">
                    <div class="card info-card">
                        <div class="card-header bg-info text-white">
                            <h5><i class="fas fa-lightbulb me-2"></i>معلومات الخوارزمية</h5>
                        </div>
                        <div class="card-body">
                            <p>الخوارزمية الجينية تحاكي عملية التطور الطبيعي لإيجاد أفضل مجموعة من الميزات.</p>
                            <ul class="fa-ul">
                                <li><span class="fa-li"><i class="fas fa-check text-success"></i></span>تهجين وطفرة</li>
                                <li><span class="fa-li"><i class="fas fa-check text-success"></i></span>اختيار الأفضل</li>
                                <li><span class="fa-li"><i class="fas fa-check text-success"></i></span>تطور عبر الأجيال</li>
                                <li><span class="fa-li"><i class="fas fa-check text-success"></i></span>نتائج مثبتة علمياً</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <div id="gaResults" class="mt-4" style="display: none;">
                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h5><i class="fas fa-chart-line me-2"></i>نتائج الخوارزمية الجينية</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon bg-primary">
                                        <i class="fas fa-star"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 id="gaFinalScore">0.0000</h3>
                                        <p>اللياقة النهائية</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon bg-success">
                                        <i class="fas fa-list"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 id="gaSelectedCount">0</h3>
                                        <p>عدد الميزات المختارة</p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="stat-card">
                                    <div class="stat-icon bg-info">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <div class="stat-content">
                                        <h3 id="gaCacheStatus2">جديدة</h3>
                                        <p>حالة النتيجة</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="mt-4">
                            <h6>الميزات المختارة:</h6>
                            <div id="gaSelectedFeatures" class="feature-list"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="ga-results-detailed-section" class="mb-5" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-brain me-2"></i>نتائج الخوارزمية الجينية</h2>
                <p class="section-description">النتائج التفصيلية للخوارزمية الجينية</p>
            </div>

            <div class="card">
                <div class="card-header bg-primary text-white">
                    <h5><i class="fas fa-dna me-2"></i>النتائج التفصيلية</h5>
                </div>
                <div class="card-body">
                    <div id="gaDetailedResultsContent">
                    </div>
                </div>
            </div>
        </section>

        <section id="traditional-section" class="mb-5">
            <div class="section-header">
                <h2><i class="fas fa-chart-bar me-2"></i>الطرق التقليدية</h2>
                <p class="section-description">طرق اختيار الميزات التقليدية المعتمدة على النماذج</p>
            </div>

            <div class="card method-box traditional-box">
                <div class="card-header bg-warning text-dark">
                    <h5><i class="fas fa-cogs me-2"></i>الطرق التقليدية</h5>
                </div>
                <div class="card-body">
                    <div class="method-description">
                        <p>تشمل الطرق التقليدية: Random Forest, L1 Logistic, RFE with Random Forest</p>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-4">
                            <div class="method-item">
                                <h6><i class="fas fa-tree me-2"></i>Random Forest</h6>
                                <p class="small text-muted">اختيار الميزات بناءً على أهمية الميزات في غابة عشوائية</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="method-item">
                                <h6><i class="fas fa-project-diagram me-2"></i>L1 Logistic</h6>
                                <p class="small text-muted">اختيار الميزات باستخدام الانحدار اللوجستي مع عقوبة L1</p>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="method-item">
                                <h6><i class="fas fa-sort-amount-down me-2"></i>RFE with RF</h6>
                                <p class="small text-muted">إزالة الميزات العودية باستخدام غابة عشوائية</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-warning btn-lg" id="runTraditionalMethods">
                            <i class="fas fa-play-circle me-2"></i>تشغيل جميع الطرق التقليدية
                        </button>
                    </div>
                    <div class="mt-3 text-center">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            الطرق المخزنة: 
                            <span id="traditionalCacheStatus" class="badge bg-secondary">لا توجد نتائج مخزنة</span>
                        </small>
                    </div>
                </div>
            </div>
        </section>

        <section id="traditional-results-section" class="mb-5" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-list-ol me-2"></i>نتائج الطرق التقليدية</h2>
                <p class="section-description">النتائج التفصيلية للطرق التقليدية المطبقة</p>
            </div>

            <div class="card">
                <div class="card-header bg-warning text-dark">
                    <h5><i class="fas fa-chart-bar me-2"></i>النتائج التفصيلية</h5>
                </div>
                <div class="card-body">
                    <div id="traditionalResultsContent">
                    </div>
                </div>
            </div>
        </section>

        <section id="statistical-section" class="mb-5">
            <div class="section-header">
                <h2><i class="fas fa-calculator me-2"></i>الطرق الإحصائية</h2>
                <p class="section-description">طرق اختيار الميزات المعتمدة على الإحصائيات والاختبارات</p>
            </div>

            <div class="card method-box statistical-box">
                <div class="card-header bg-success text-white">
                    <h5><i class="fas fa-chart-line me-2"></i>الطرق الإحصائية</h5>
                </div>
                <div class="card-body">
                    <div class="method-description">
                        <p>تشمل الطرق الإحصائية: Chi-Square, Mutual Information, ANOVA F-Test, Variance Threshold</p>
                    </div>
                    <div class="row mt-4">
                        <div class="col-md-3">
                            <div class="method-item">
                                <h6><i class="fas fa-square-root-alt me-2"></i>Chi-Square</h6>
                                <p class="small text-muted">اختيار الميزات بناءً على اختبار مربع كاي للإستقلالية</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="method-item">
                                <h6><i class="fas fa-info-circle me-2"></i>Mutual Information</h6>
                                <p class="small text-muted">اختيار الميزات بناءً على المعلومات المتبادلة</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="method-item">
                                <h6><i class="fas fa-chart-bar me-2"></i>ANOVA F-Test</h6>
                                <p class="small text-muted">اختيار الميزات بناءً على تحليل التباين</p>
                            </div>
                        </div>
                        <div class="col-md-3">
                            <div class="method-item">
                                <h6><i class="fas fa-sliders-h me-2"></i>Variance Threshold</h6>
                                <p class="small text-muted">إزالة الميزات ذات التباين المنخفض</p>
                            </div>
                        </div>
                    </div>
                    <div class="text-center mt-4">
                        <button class="btn btn-success btn-lg" id="runStatisticalMethods">
                            <i class="fas fa-play-circle me-2"></i>تشغيل جميع الطرق الإحصائية
                        </button>
                    </div>
                    <div class="mt-3 text-center">
                        <small class="text-muted">
                            <i class="fas fa-info-circle me-1"></i>
                            الطرق المخزنة: 
                            <span id="statisticalCacheStatus" class="badge bg-secondary">لا توجد نتائج مخزنة</span>
                        </small>
                    </div>
                </div>
            </div>
        </section>

        <section id="statistical-results-section" class="mb-5" style="display: none;">
            <div class="section-header">
                <h2><i class="fas fa-calculator me-2"></i>نتائج الطرق الإحصائية</h2>
                <p class="section-description">النتائج التفصيلية للطرق الإحصائية المطبقة</p>
            </div>

            <div class="card">
                <div class="card-header bg-success text-white">
                    <h5><i class="fas fa-chart-line me-2"></i>النتائج التفصيلية</h5>
                </div>
                <div class="card-body">
                    <div id="statisticalResultsContent">
                    </div>
                </div>
            </div>
        </section>

        <section id="comparison-section" class="mb-5">
            <div class="section-header">
                <h2><i class="fas fa-balance-scale me-2"></i>المقارنة والنتائج</h2>
                <p class="section-description">قارن بين أداء جميع الطرق واعرض النتائج النهائية</p>
            </div>

            <div class="text-center mb-4">
                <button class="btn btn-danger btn-lg" id="compareMethods">
                    <i class="fas fa-chart-bar me-2"></i>مقارنة جميع النتائج
                </button>
                <button class="btn btn-outline-secondary ms-2" id="clearCache">
                    <i class="fas fa-trash me-2"></i>مسح الذاكرة المؤقتة
                </button>
            </div>

            <div id="comparisonResults" style="display: none;">
                <div class="row">
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header bg-info text-white">
                                <h5><i class="fas fa-chart-bar me-2"></i>مقارنة أداء الطرق</h5>
                            </div>
                            <div class="card-body text-center">
                                <img id="comparisonChart" class="img-fluid" alt="مخطط المقارنة">
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6 mb-4">
                        <div class="card">
                            <div class="card-header bg-warning text-dark">
                                <h5><i class="fas fa-chart-line me-2"></i>تطور اللياقة (GA)</h5>
                            </div>
                            <div class="card-body text-center">
                                <img id="gaHistoryChart" class="img-fluid" alt="مخطط تطور اللياقة">
                            </div>
                        </div>
                    </div>
                </div>

                <div class="card">
                    <div class="card-header bg-success text-white">
                        <h5><i class="fas fa-table me-2"></i>النتائج التفصيلية</h5>
                    </div>
                    <div class="card-body">
                        <div class="scrollable-table">
                            <div class="scrollable-horizontal">
                                <table class="table table-striped" id="resultsTable">
                                    <thead class="table-light">
                                        <tr>
                                            <th>الطريقة</th>
                                            <th>درجة اللياقة</th>
                                            <th>عدد الميزات</th>
                                            <th>الميزات المختارة</th>
                                        </tr>
                                    </thead>
                                    <tbody id="resultsBody"></tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <footer class="bg-dark text-light py-4 mt-5">
        <div class="container text-center">
            <p>نظام اختيار الميزات باستخدام الخوارزميات الجينية والطرق التقليدية</p>
            <p class="mb-0">تم التطوير باستخدام Flask و Python و JavaScript</p>
        </div>
    </footer>

    <!-- ========== المكتبات والبرامج النصية ========== -->
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- البرنامج النصي المخصص -->
    <script src="{{ url_for('static', filename='js/script.js') }}"></script>
</body>
</html>
